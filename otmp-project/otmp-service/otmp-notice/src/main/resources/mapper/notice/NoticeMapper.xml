<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lenovo.otmp.notice.mapper.NoticeMapper">

    <resultMap type="com.lenovo.otmp.notice.dto.NoticeDto" id="NoticeResult">
        <result property="noticeId"       column="notice_id"       />
        <result property="noticeTitle"    column="notice_title"    />
        <result property="noticeType"     column="notice_type"     />
        <result property="noticeContent"  column="notice_content"  />
        <result property="status"         column="status"          />
        <result property="createBy"       column="create_by"       />
        <result property="createTime"     column="create_time"     />
        <result property="updateBy"       column="update_by"       />
        <result property="updateTime"     column="update_time"     />
        <result property="remark"         column="remark"          />
    </resultMap>

    <sql id="selectNoticeVo">
        select notice_id, notice_title, notice_type, notice_content, status, create_by, create_time, update_by, update_time, remark
        from sys_notice
    </sql>

    <select id="selectNoticeList" parameterType="com.lenovo.otmp.system.domain.SysNotice" resultMap="NoticeResult">
        <include refid="selectNoticeVo"/>
        where status = '0'
        <if test="noticeTitle != null and noticeTitle != ''">
            AND notice_title like  '%'||#{noticeTitle}||'%'
        </if>
        <if test="noticeType != null and noticeType != ''">
            AND notice_type = #{noticeType}
        </if>
        <if test="createBy != null and createBy != ''">
            AND create_by like  '%'||#{createBy}||'%'
        </if>
        order by update_time desc
    </select>
</mapper>
